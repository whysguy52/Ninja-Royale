[gd_scene format=3 uid="uid://cskbkmvxgnglm"]

[ext_resource type="PackedScene" uid="uid://wfg5jrjbcmoe" path="res://assets/3d/test_level/restaurant.blend" id="1_sya2y"]
[ext_resource type="PackedScene" uid="uid://djwu8x5qee54e" path="res://objects/ninja/ninja.tscn" id="2_yu8ms"]
[ext_resource type="Shader" uid="uid://bd1yvyslrj7iq" path="res://reveal_shader.gdshader" id="3_yclkw"]
[ext_resource type="PackedScene" uid="uid://coco2dpvnda0a" path="res://assets/3d/ninja/blend/ninja.blend" id="4_okgi7"]
[ext_resource type="PackedScene" uid="uid://cv2vyiaqgtyad" path="res://objects/game_menu/game_menu.tscn" id="5_5qwht"]
[ext_resource type="PackedScene" uid="uid://clrnifxmkjafv" path="res://objects/test_sphere.tscn" id="6_5qwht"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_k83wm"]
sky_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
ground_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
energy_multiplier = 0.0

[sub_resource type="Sky" id="Sky_yclkw"]
sky_material = SubResource("ProceduralSkyMaterial_k83wm")

[sub_resource type="Environment" id="Environment_h5q5o"]
sky = SubResource("Sky_yclkw")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="BoxShape3D" id="BoxShape3D_h4o5y"]
size = Vector3(40, 1, 40)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_h5q5o"]
render_priority = 1
shader = ExtResource("3_yclkw")
shader_parameter/is_hidden = false

[sub_resource type="QuadMesh" id="QuadMesh_okgi7"]
material = SubResource("ShaderMaterial_h5q5o")

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_1uppa"]
radius = 0.289129
height = 1.73923

[sub_resource type="AnimationNodeAdd2" id="AnimationNodeAdd2_nbwe3"]
filter_enabled = true
filters = ["Armature/Skeleton3D:Bicep.L", "Armature/Skeleton3D:Bicep.R", "Armature/Skeleton3D:Elbow_Pole.L", "Armature/Skeleton3D:Elbow_Pole.R", "Armature/Skeleton3D:Finger_Curl_Controller.L", "Armature/Skeleton3D:Finger_Curl_Controller.R", "Armature/Skeleton3D:Finger_Spread_Controller.L", "Armature/Skeleton3D:Finger_Spread_Controller.R", "Armature/Skeleton3D:Forearm.L", "Armature/Skeleton3D:Forearm.R", "Armature/Skeleton3D:Hand.R", "Armature/Skeleton3D:Index1.L", "Armature/Skeleton3D:Index1.R", "Armature/Skeleton3D:Index2.L", "Armature/Skeleton3D:Index2.R", "Armature/Skeleton3D:Index3.L", "Armature/Skeleton3D:Index3.R", "Armature/Skeleton3D:Middle1.L", "Armature/Skeleton3D:Middle1.R", "Armature/Skeleton3D:Middle2.L", "Armature/Skeleton3D:Middle2.R", "Armature/Skeleton3D:Middle3.L", "Armature/Skeleton3D:Middle3.R", "Armature/Skeleton3D:Pinky1.L", "Armature/Skeleton3D:Pinky1.R", "Armature/Skeleton3D:Pinky2.L", "Armature/Skeleton3D:Pinky2.R", "Armature/Skeleton3D:Pinky3.L", "Armature/Skeleton3D:Pinky3.R", "Armature/Skeleton3D:Ring1.L", "Armature/Skeleton3D:Ring1.R", "Armature/Skeleton3D:Ring2.L", "Armature/Skeleton3D:Ring2.R", "Armature/Skeleton3D:Ring3.L", "Armature/Skeleton3D:Ring3.R", "Armature/Skeleton3D:Thumb1.L", "Armature/Skeleton3D:Thumb1.R", "Armature/Skeleton3D:Thumb2.L", "Armature/Skeleton3D:Thumb2.R", "Armature/Skeleton3D:Thumb3.L", "Armature/Skeleton3D:Thumb3.R", "Armature/Skeleton3D:Wrist_Controller.L", "Armature/Skeleton3D:Wrist_Controller.R"]
sync = true

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_36ro2"]
animation = &"arm_run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_p6n7k"]
animation = &"sword_run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_w27px"]
animation = &"idle_stand"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_33se1"]
animation = &"leg_run"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_biw5r"]
filters = ["Armature/Skeleton3D:Bicep.L", "Armature/Skeleton3D:Forearm.L", "Armature/Skeleton3D:Middle1.L", "Armature/Skeleton3D:Middle2.L", "Armature/Skeleton3D:Middle3.L", "Armature/Skeleton3D:Pinky1.L", "Armature/Skeleton3D:Pinky2.L", "Armature/Skeleton3D:Pinky3.L", "Armature/Skeleton3D:Ring1.L", "Armature/Skeleton3D:Ring2.L", "Armature/Skeleton3D:Ring3.L"]
sync = true

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_0u4um"]
filters = ["Armature/Skeleton3D:Base", "Armature/Skeleton3D:Bicep.L", "Armature/Skeleton3D:Bicep.R", "Armature/Skeleton3D:Elbow_Pole.L", "Armature/Skeleton3D:Elbow_Pole.R", "Armature/Skeleton3D:Finger_Curl_Controller.L", "Armature/Skeleton3D:Finger_Curl_Controller.R", "Armature/Skeleton3D:Finger_Spread_Controller.L", "Armature/Skeleton3D:Finger_Spread_Controller.R", "Armature/Skeleton3D:Foot1.L", "Armature/Skeleton3D:Foot1.R", "Armature/Skeleton3D:Foot2.L", "Armature/Skeleton3D:Foot2.R", "Armature/Skeleton3D:Foot_Controller.L", "Armature/Skeleton3D:Foot_Controller.R", "Armature/Skeleton3D:Forearm.L", "Armature/Skeleton3D:Forearm.R", "Armature/Skeleton3D:Hand.R", "Armature/Skeleton3D:Index1.L", "Armature/Skeleton3D:Index1.R", "Armature/Skeleton3D:Index2.L", "Armature/Skeleton3D:Index2.R", "Armature/Skeleton3D:Index3.L", "Armature/Skeleton3D:Index3.R", "Armature/Skeleton3D:Leg_Controller.L", "Armature/Skeleton3D:Leg_Controller.R", "Armature/Skeleton3D:Leg_Pole.L", "Armature/Skeleton3D:Leg_Pole.R", "Armature/Skeleton3D:Middle1.L", "Armature/Skeleton3D:Middle1.R", "Armature/Skeleton3D:Middle2.L", "Armature/Skeleton3D:Middle2.R", "Armature/Skeleton3D:Middle3.L", "Armature/Skeleton3D:Middle3.R", "Armature/Skeleton3D:Pinky1.L", "Armature/Skeleton3D:Pinky1.R", "Armature/Skeleton3D:Pinky2.L", "Armature/Skeleton3D:Pinky2.R", "Armature/Skeleton3D:Pinky3.L", "Armature/Skeleton3D:Pinky3.R", "Armature/Skeleton3D:Ring1.L", "Armature/Skeleton3D:Ring1.R", "Armature/Skeleton3D:Ring2.L", "Armature/Skeleton3D:Ring2.R", "Armature/Skeleton3D:Ring3.L", "Armature/Skeleton3D:Ring3.R", "Armature/Skeleton3D:Shin.L", "Armature/Skeleton3D:Shin.R", "Armature/Skeleton3D:Spine1", "Armature/Skeleton3D:Thigh.L", "Armature/Skeleton3D:Thigh.R", "Armature/Skeleton3D:Thumb1.L", "Armature/Skeleton3D:Thumb1.R", "Armature/Skeleton3D:Thumb2.L", "Armature/Skeleton3D:Thumb2.R", "Armature/Skeleton3D:Thumb3.L", "Armature/Skeleton3D:Thumb3.R", "Armature/Skeleton3D:Wrist_Controller.L", "Armature/Skeleton3D:Wrist_Controller.R"]
sync = true

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_wvtda"]

[sub_resource type="AnimationNodeTimeSeek" id="AnimationNodeTimeSeek_yf2cf"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_en5jm"]
nodes/output/position = Vector2(1440, -180)
nodes/Add2/node = SubResource("AnimationNodeAdd2_nbwe3")
nodes/Add2/position = Vector2(800, -80)
nodes/Animation/node = SubResource("AnimationNodeAnimation_33se1")
nodes/Animation/position = Vector2(640, -220)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_36ro2")
"nodes/Animation 2/position" = Vector2(480, -100)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_p6n7k")
"nodes/Animation 3/position" = Vector2(460, 100)
"nodes/Animation 4/node" = SubResource("AnimationNodeAnimation_w27px")
"nodes/Animation 4/position" = Vector2(800, -220)
nodes/Blend2/node = SubResource("AnimationNodeBlend2_0u4um")
nodes/Blend2/position = Vector2(1000, -120)
"nodes/Blend2 2/node" = SubResource("AnimationNodeBlend2_biw5r")
"nodes/Blend2 2/position" = Vector2(640, -20)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_wvtda")
nodes/TimeScale/position = Vector2(1300, -180)
nodes/TimeSeek/node = SubResource("AnimationNodeTimeSeek_yf2cf")
nodes/TimeSeek/position = Vector2(1160, -160)
node_connections = [&"output", 0, &"TimeScale", &"Add2", 0, &"Animation", &"Add2", 1, &"Blend2 2", &"Blend2", 0, &"Animation 4", &"Blend2", 1, &"Add2", &"Blend2 2", 0, &"Animation 2", &"Blend2 2", 1, &"Animation 3", &"TimeScale", 0, &"TimeSeek", &"TimeSeek", 0, &"Blend2"]

[node name="Node3D" type="StaticBody3D" unique_id=252788509]

[node name="WorldEnvironment" type="WorldEnvironment" parent="." unique_id=239539766]
environment = SubResource("Environment_h5q5o")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="." unique_id=1287215599]
transform = Transform3D(-0.8660254, -0.43301278, 0.25, 0, 0.49999997, 0.86602545, -0.50000006, 0.75, -0.43301266, 0, 0, 0)
light_energy = 0.0
shadow_enabled = true

[node name="restaurant" parent="." unique_id=155894436 instance=ExtResource("1_sya2y")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.004609108, 0, 0.00429821)

[node name="CollisionShape3D" type="CollisionShape3D" parent="." unique_id=566670767]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
shape = SubResource("BoxShape3D_h4o5y")

[node name="ninja" parent="." unique_id=932835589 instance=ExtResource("2_yu8ms")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.04730606, 0.3234967, -2.563085)

[node name="MeshInstance3D" type="MeshInstance3D" parent="." unique_id=1091608063]
transform = Transform3D(0.49999997, -1.4901161e-08, 0.86602545, -0.86602545, 0, 0.49999997, 0, -1, -4.371139e-08, 3, 3, 0)
mesh = SubResource("QuadMesh_okgi7")

[node name="ninja2" type="CharacterBody3D" parent="." unique_id=72517601]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.4461482, 0, -5.5015864)

[node name="ninja" parent="ninja2" unique_id=1192118702 instance=ExtResource("4_okgi7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.0275541)

[node name="Skeleton3D" parent="ninja2/ninja/Armature" index="0"]
bones/0/rotation = Quaternion(0, 1, 0, -7.54979e-08)
bones/4/rotation = Quaternion(0.08215642, 0.155498, -0.98131216, 0.078085184)
bones/4/scale = Vector3(1, 1, 1)
bones/5/rotation = Quaternion(0.30077648, 4.219221e-07, -1.4004973e-05, 0.95369464)
bones/6/scale = Vector3(1, 1, 1)
bones/7/rotation = Quaternion(0.00024583514, 0.00024393201, -0.7071059, 0.7071076)
bones/7/scale = Vector3(1, 1, 1)
bones/8/rotation = Quaternion(0.02766909, 0.027678387, -0.7065676, 0.7065626)
bones/9/rotation = Quaternion(0.0027199767, 0.0027016688, -0.7070964, 0.7071068)
bones/10/rotation = Quaternion(-0.006279295, -0.0062810034, -0.70707816, 0.70707965)
bones/10/scale = Vector3(1, 1, 1)
bones/11/rotation = Quaternion(0.0103074, 0.010311533, -0.70703346, 0.70702976)
bones/11/scale = Vector3(1, 1, 1)
bones/12/rotation = Quaternion(0.0002933047, 0.000294119, -0.7071072, 0.70710623)
bones/13/rotation = Quaternion(0.00361031, 0.0036089798, -0.7070969, 0.7070983)
bones/14/rotation = Quaternion(-0.0063738995, -0.0063740336, -0.7070781, 0.707078)
bones/15/rotation = Quaternion(-0.0033449014, -0.0033483729, -0.7070969, 0.7071009)
bones/16/rotation = Quaternion(0.009821234, 0.009820074, -0.7070378, 0.70703936)
bones/17/rotation = Quaternion(-0.036176644, -0.036176614, -0.70618093, 0.7061807)
bones/18/rotation = Quaternion(0.001183242, 0.0011832502, -0.7071059, 0.7071057)
bones/19/rotation = Quaternion(0.43984914, 0.42708007, -0.06204136, 0.7875826)
bones/20/rotation = Quaternion(-0.2899351, -0.636658, -0.30768, 0.64493203)
bones/20/scale = Vector3(1, 1, 1)
bones/21/rotation = Quaternion(-0.56478804, 2.7222512e-07, -9.0756953e-07, 0.82523614)
bones/22/rotation = Quaternion(-0.2706028, 0.6532839, -0.27059454, -0.65327865)
bones/23/rotation = Quaternion(5.6851786e-06, 3.984959e-06, -0.70710605, 0.7071075)
bones/26/rotation = Quaternion(0.12416207, -0.12707998, 0.9808797, 0.07943181)
bones/26/scale = Vector3(1, 1, 1)
bones/27/rotation = Quaternion(0.23478976, -4.4429888e-07, 1.0922317e-05, 0.97204626)
bones/28/rotation = Quaternion(-0.0047827167, -5.66441e-07, 5.759892e-07, 0.99998856)
bones/28/scale = Vector3(1, 1, 1)
bones/29/rotation = Quaternion(0.00024580533, -0.0002438873, 0.707106, 0.7071075)
bones/30/rotation = Quaternion(0.02766134, -0.027679924, 0.70657027, 0.70656013)
bones/31/rotation = Quaternion(0.0027233793, -0.0027052278, 0.7070965, 0.7071066)
bones/32/rotation = Quaternion(-0.0062794075, 0.006281052, 0.70707834, 0.7070795)
bones/33/rotation = Quaternion(0.0103090955, -0.0103090275, 0.7070317, 0.70703155)
bones/34/rotation = Quaternion(0.0002892209, -0.00029909718, 0.7071111, 0.7071023)
bones/35/rotation = Quaternion(0.0036103881, -0.003609058, 0.7070969, 0.7070983)
bones/36/rotation = Quaternion(-0.0063754977, 0.0063726637, 0.70707995, 0.7070762)
bones/36/scale = Vector3(1, 1, 1)
bones/37/rotation = Quaternion(-0.0033477757, 0.0033438543, 0.70710117, 0.70709664)
bones/38/rotation = Quaternion(0.009821138, -0.009819716, 0.70703787, 0.70703936)
bones/38/scale = Vector3(1, 1, 1)
bones/39/rotation = Quaternion(-0.036177427, 0.03617549, 0.7061828, 0.7061788)
bones/40/rotation = Quaternion(0.0011858878, -0.0011837996, 0.707104, 0.70710754)
bones/41/rotation = Quaternion(0.4398489, -0.42708, 0.062041502, 0.7875828)
bones/42/rotation = Quaternion(-0.2899325, 0.63665915, 0.307679, 0.6449325)
bones/43/rotation = Quaternion(-0.564789, 1.4490902e-07, -3.5484874e-07, 0.82523537)
bones/44/rotation = Quaternion(0.27060196, 0.6532839, -0.2705945, 0.653279)
bones/45/rotation = Quaternion(5.6733616e-06, -3.959971e-06, 0.70710605, 0.7071075)
bones/46/rotation = Quaternion(2.37427e-07, 1.30657e-07, -0.707107, 0.707107)
bones/47/rotation = Quaternion(0.011710932, -0.05109081, -0.6882947, 0.7235351)
bones/48/rotation = Quaternion(-0.09106638, 5.252657e-08, -1.1899242e-07, 0.9958449)
bones/49/rotation = Quaternion(0.56242156, -0.036544442, -0.022946522, 0.8257239)
bones/50/rotation = Quaternion(0.21876453, 0.019921318, -0.060338978, 0.9737066)
bones/50/scale = Vector3(1, 1, 1)
bones/51/rotation = Quaternion(1.38879e-08, -1.70207e-08, 0.707107, 0.707107)
bones/52/rotation = Quaternion(-0.019295342, 0.07419212, 0.6755997, 0.73327243)
bones/53/rotation = Quaternion(-0.07553506, 8.225039e-05, -0.00077924365, 0.99714285)
bones/53/scale = Vector3(1, 1, 1)
bones/54/rotation = Quaternion(0.55918765, 0.014259778, 0.04797665, 0.8275289)
bones/55/rotation = Quaternion(0.20409994, -0.0075884466, 0.07508805, 0.97603667)
bones/55/scale = Vector3(1, 1, 1)
bones/56/position = Vector3(-0.42166656, 0.10000019, -0.8833333)
bones/56/rotation = Quaternion(-0.707107, 0, 0, 0.707107)
bones/57/position = Vector3(-0.40124434, 0.3131014, 0.016666632)
bones/57/rotation = Quaternion(0, 0.707107, 0.707107, 0)
bones/58/position = Vector3(-0.5017842, 1.4939321, -2.6833334)
bones/58/rotation = Quaternion(-0.707107, 0, 0, 0.707107)
bones/59/position = Vector3(0.7956239, 2.6117458, 0.01666614)
bones/59/rotation = Quaternion(0, 0.707107, 0.707107, 0)
bones/60/position = Vector3(-0.79015195, 2.6492605, 0.0017158501)
bones/60/rotation = Quaternion(0, 0.707107, 0.707107, 0)
bones/61/position = Vector3(-0.95535266, 3.589868, 1.5166664)
bones/61/rotation = Quaternion(0, 0.707107, 0.707107, 0)
bones/62/position = Vector3(1.0852687, 3.5660963, 1.5166664)
bones/62/rotation = Quaternion(0, 0.707107, 0.707107, 0)
bones/63/position = Vector3(0.47692534, 0.31457433, 0.01666662)
bones/63/rotation = Quaternion(0, 0.707107, 0.707107, 0)
bones/64/position = Vector3(0.75057554, 1.5364088, -2.6833334)
bones/64/rotation = Quaternion(-0.707107, 0, 0, 0.707107)
bones/65/position = Vector3(0.49917683, 0.10137534, -0.8853655)
bones/65/rotation = Quaternion(-0.707107, 0, 0, 0.707107)

[node name="Arms" parent="ninja2/ninja/Armature/Skeleton3D" index="0"]
layers = 2

[node name="Head" parent="ninja2/ninja/Armature/Skeleton3D" index="1"]
layers = 2

[node name="Legs" parent="ninja2/ninja/Armature/Skeleton3D" index="2"]
layers = 2

[node name="Neck" parent="ninja2/ninja/Armature/Skeleton3D" index="3"]
layers = 2

[node name="Torso" parent="ninja2/ninja/Armature/Skeleton3D" index="4"]
layers = 2

[node name="collision" type="CollisionShape3D" parent="ninja2" unique_id=772499509]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.916732, 0)
shape = SubResource("CapsuleShape3D_1uppa")

[node name="rotation" type="Node3D" parent="ninja2" unique_id=680257335]

[node name="dash_timer" type="Timer" parent="ninja2" unique_id=323495980]
wait_time = 0.175
one_shot = true

[node name="dash_cooldown_timer" type="Timer" parent="ninja2" unique_id=1015734303]
wait_time = 0.75
one_shot = true

[node name="jump_cooldown_timer" type="Timer" parent="ninja2" unique_id=270852178]
wait_time = 0.25
one_shot = true

[node name="game_menu" parent="ninja2" unique_id=1119066640 instance=ExtResource("5_5qwht")]
visible = false

[node name="AnimationTree" type="AnimationTree" parent="ninja2" unique_id=1322810600]
root_node = NodePath("../ninja")
tree_root = SubResource("AnimationNodeBlendTree_en5jm")
anim_player = NodePath("../ninja/AnimationPlayer")
parameters/Add2/add_amount = 1.0
parameters/Blend2/blend_amount = 0.0
"parameters/Blend2 2/blend_amount" = 0.0
parameters/TimeScale/scale = 1.0
parameters/TimeSeek/seek_request = -1.0

[node name="Node3D" parent="." unique_id=954662986 instance=ExtResource("6_5qwht")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.167859, 1.7339205, -2.4910402)

[connection signal="timeout" from="ninja2/dash_timer" to="ninja2" method="_on_dash_timer_timeout"]
[connection signal="timeout" from="ninja2/dash_cooldown_timer" to="ninja2" method="_on_dash_cooldown_timer_timeout"]
[connection signal="timeout" from="ninja2/jump_cooldown_timer" to="ninja2" method="_on_jump_cooldown_timer_timeout"]

[editable path="ninja2/ninja"]
